{"id":"p71p","dependencies":[{"name":"/Users/adriaan/Developer/js/packages/app/package.json","includedInParent":true,"mtime":1542564357914},{"name":"/Users/adriaan/Developer/js/packages/app/.babelrc","includedInParent":true,"mtime":1542562355252},{"name":"/Users/adriaan/Developer/js/packages/app/node_modules/stream-http/package.json","includedInParent":true,"mtime":1542488253979},{"name":"./capability","loc":{"line":1,"column":25},"parent":"/Users/adriaan/Developer/js/packages/app/node_modules/stream-http/lib/request.js","resolved":"/Users/adriaan/Developer/js/packages/app/node_modules/stream-http/lib/capability.js"},{"name":"inherits","loc":{"line":2,"column":23},"parent":"/Users/adriaan/Developer/js/packages/app/node_modules/stream-http/lib/request.js","resolved":"/Users/adriaan/Developer/js/packages/app/node_modules/inherits/inherits_browser.js"},{"name":"./response","loc":{"line":3,"column":23},"parent":"/Users/adriaan/Developer/js/packages/app/node_modules/stream-http/lib/request.js","resolved":"/Users/adriaan/Developer/js/packages/app/node_modules/stream-http/lib/response.js"},{"name":"readable-stream","loc":{"line":4,"column":21},"parent":"/Users/adriaan/Developer/js/packages/app/node_modules/stream-http/lib/request.js","resolved":"/Users/adriaan/Developer/js/packages/app/node_modules/readable-stream/readable-browser.js"},{"name":"to-arraybuffer","loc":{"line":5,"column":28},"parent":"/Users/adriaan/Developer/js/packages/app/node_modules/stream-http/lib/request.js","resolved":"/Users/adriaan/Developer/js/packages/app/node_modules/to-arraybuffer/index.js"},{"name":"buffer","parent":"/Users/adriaan/Developer/js/packages/app/node_modules/stream-http/lib/request.js","resolved":"/Users/adriaan/Developer/js/packages/app/node_modules/buffer/index.js"},{"name":"process","parent":"/Users/adriaan/Developer/js/packages/app/node_modules/stream-http/lib/request.js","resolved":"/Users/adriaan/Developer/js/packages/app/node_modules/process/browser.js"}],"generated":{"js":"var $p71p$exports={},$p71p$var$process=$parcel$require(\"p71p\",\"process\"),$p71p$var$Buffer=$parcel$require(\"p71p\",\"buffer\").Buffer,$p71p$var$capability=$parcel$require(\"p71p\",\"./capability\"),$p71p$var$inherits=$parcel$require(\"p71p\",\"inherits\"),$p71p$var$response=$parcel$require(\"p71p\",\"./response\"),$p71p$var$stream=$parcel$require(\"p71p\",\"readable-stream\"),$p71p$var$toArrayBuffer=$parcel$require(\"p71p\",\"to-arraybuffer\"),$p71p$var$IncomingMessage=$p71p$var$response.IncomingMessage,$p71p$var$rStates=$p71p$var$response.readyStates;function $p71p$var$decideMode(e,r){return $p71p$var$capability.fetch&&r?\"fetch\":$p71p$var$capability.mozchunkedarraybuffer?\"moz-chunked-arraybuffer\":$p71p$var$capability.msstream?\"ms-stream\":$p71p$var$capability.arraybuffer&&e?\"arraybuffer\":$p71p$var$capability.vbArray&&e?\"text:vbarray\":\"text\"}var $p71p$var$ClientRequest=$p71p$exports=function(e){var r,t=this;$p71p$var$stream.Writable.call(t),t._opts=e,t._body=[],t._headers={},e.auth&&t.setHeader(\"Authorization\",\"Basic \"+new $p71p$var$Buffer(e.auth).toString(\"base64\")),Object.keys(e.headers).forEach(function(r){t.setHeader(r,e.headers[r])});var o=!0;if(\"disable-fetch\"===e.mode||\"requestTimeout\"in e&&!$p71p$var$capability.abortController)o=!1,r=!0;else if(\"prefer-streaming\"===e.mode)r=!1;else if(\"allow-wrong-content-type\"===e.mode)r=!$p71p$var$capability.overrideMimeType;else{if(e.mode&&\"default\"!==e.mode&&\"prefer-fast\"!==e.mode)throw new Error(\"Invalid value for opts.mode\");r=!0}t._mode=$p71p$var$decideMode(r,o),t._fetchTimer=null,t.on(\"finish\",function(){t._onFinish()})};function $p71p$var$statusValid(e){try{var r=e.status;return null!==r&&0!==r}catch(t){return!1}}$p71p$var$inherits($p71p$var$ClientRequest,$p71p$var$stream.Writable),$p71p$var$ClientRequest.prototype.setHeader=function(e,r){var t=e.toLowerCase();-1===$p71p$var$unsafeHeaders.indexOf(t)&&(this._headers[t]={name:e,value:r})},$p71p$var$ClientRequest.prototype.getHeader=function(e){var r=this._headers[e.toLowerCase()];return r?r.value:null},$p71p$var$ClientRequest.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},$p71p$var$ClientRequest.prototype._onFinish=function(){var e=this;if(!e._destroyed){var r=e._opts,t=e._headers,o=null;\"GET\"!==r.method&&\"HEAD\"!==r.method&&(o=$p71p$var$capability.arraybuffer?$p71p$var$toArrayBuffer($p71p$var$Buffer.concat(e._body)):$p71p$var$capability.blobConstructor?new $parcel$global.Blob(e._body.map(function(e){return $p71p$var$toArrayBuffer(e)}),{type:(t[\"content-type\"]||{}).value||\"\"}):$p71p$var$Buffer.concat(e._body).toString());var a=[];if(Object.keys(t).forEach(function(e){var r=t[e].name,o=t[e].value;Array.isArray(o)?o.forEach(function(e){a.push([r,e])}):a.push([r,o])}),\"fetch\"===e._mode){var p=null;if($p71p$var$capability.abortController){var n=new AbortController;p=n.signal,e._fetchAbortController=n,\"requestTimeout\"in r&&0!==r.requestTimeout&&(e._fetchTimer=$parcel$global.setTimeout(function(){e.emit(\"requestTimeout\"),e._fetchAbortController&&e._fetchAbortController.abort()},r.requestTimeout))}$parcel$global.fetch(e._opts.url,{method:e._opts.method,headers:a,body:o||void 0,mode:\"cors\",credentials:r.withCredentials?\"include\":\"same-origin\",signal:p}).then(function(r){e._fetchResponse=r,e._connect()},function(r){$parcel$global.clearTimeout(e._fetchTimer),e._destroyed||e.emit(\"error\",r)})}else{var i=e._xhr=new $parcel$global.XMLHttpRequest;try{i.open(e._opts.method,e._opts.url,!0)}catch(s){return void $p71p$var$process.nextTick(function(){e.emit(\"error\",s)})}\"responseType\"in i&&(i.responseType=e._mode.split(\":\")[0]),\"withCredentials\"in i&&(i.withCredentials=!!r.withCredentials),\"text\"===e._mode&&\"overrideMimeType\"in i&&i.overrideMimeType(\"text/plain; charset=x-user-defined\"),\"requestTimeout\"in r&&(i.timeout=r.requestTimeout,i.ontimeout=function(){e.emit(\"requestTimeout\")}),a.forEach(function(e){i.setRequestHeader(e[0],e[1])}),e._response=null,i.onreadystatechange=function(){switch(i.readyState){case $p71p$var$rStates.LOADING:case $p71p$var$rStates.DONE:e._onXHRProgress()}},\"moz-chunked-arraybuffer\"===e._mode&&(i.onprogress=function(){e._onXHRProgress()}),i.onerror=function(){e._destroyed||e.emit(\"error\",new Error(\"XHR error\"))};try{i.send(o)}catch(s){return void $p71p$var$process.nextTick(function(){e.emit(\"error\",s)})}}}},$p71p$var$ClientRequest.prototype._onXHRProgress=function(){$p71p$var$statusValid(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress())},$p71p$var$ClientRequest.prototype._connect=function(){var e=this;e._destroyed||(e._response=new $p71p$var$IncomingMessage(e._xhr,e._fetchResponse,e._mode,e._fetchTimer),e._response.on(\"error\",function(r){e.emit(\"error\",r)}),e.emit(\"response\",e._response))},$p71p$var$ClientRequest.prototype._write=function(e,r,t){this._body.push(e),t()},$p71p$var$ClientRequest.prototype.abort=$p71p$var$ClientRequest.prototype.destroy=function(){this._destroyed=!0,$parcel$global.clearTimeout(this._fetchTimer),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},$p71p$var$ClientRequest.prototype.end=function(e,r,t){\"function\"==typeof e&&(t=e,e=void 0),$p71p$var$stream.Writable.prototype.end.call(this,e,r,t)},$p71p$var$ClientRequest.prototype.flushHeaders=function(){},$p71p$var$ClientRequest.prototype.setTimeout=function(){},$p71p$var$ClientRequest.prototype.setNoDelay=function(){},$p71p$var$ClientRequest.prototype.setSocketKeepAlive=function(){};var $p71p$var$unsafeHeaders=[\"accept-charset\",\"accept-encoding\",\"access-control-request-headers\",\"access-control-request-method\",\"connection\",\"content-length\",\"cookie\",\"cookie2\",\"date\",\"dnt\",\"expect\",\"host\",\"keep-alive\",\"origin\",\"referer\",\"te\",\"trailer\",\"transfer-encoding\",\"upgrade\",\"via\"];","map":null},"hash":"31c6370bc22b2f7209169d1cf75d673d","cacheData":{"env":{},"imports":{"$require$./capability":["./capability","*"],"$require$inherits":["inherits","*"],"$require$./response":["./response","*"],"$require$readable-stream":["readable-stream","*"],"$require$to-arraybuffer":["to-arraybuffer","*"],"$require$buffer":["buffer","*"],"$require$process":["process","*"]},"exports":{},"wildcards":[],"sideEffects":true,"isCommonJS":true}}